<% f.field_container :name do %>
  <%= f.label :name, t("name") %><br />
  <%= f.text_field :name %>
  <%= f.error_message_on :name %>
<% end %>

<% f.field_container :name do %>
  <%= f.label :presentation, t("presentation") %><br />
  <%= f.text_field :presentation %>
  <%= f.error_message_on :presentation %>
<% end %>

<h3><%= t("option_values") %></h3>
<table class="index">
  <thead>
    <tr>
      <th><%= t("name") %></th>
      <th><%= t("display") %></th>
      <th></th>
    </tr>
  </thead>
  <tbody id="option_values">
		<%= f.render_associated_form(@option_type.option_values) %>
		<tr id="none">
		  <td colspan="3"><%= @option_type.option_values.empty? ? t("none") : "" %></td>
		</tr>
	</tbody>
</table>

<p>
<%= f.add_associated_link( icon('add') + ' ' + t("add_option_value"), @option_type.option_values.build, 
                         {:onclick => "jQuery('#none').hide();", :class => 'iconlink'}) %>
</p>

<% javascript_tag do %>

  // Function will allow user to reorder option values for an option type
  $('#option_values').sortable(
    {
      axis: 'y',
      dropOnEmpty:false,
      handle: '.handle',
      cursor: 'crosshair',
      items: 'tr',
      opacity: 0.4,
      scroll: true,
      update: function(){
        $.ajax({
            type: 'post',
            data: $('#option_values').sortable('serialize') + '&id=<%=@option_type.id-%>',
            dataType: 'script',
            complete: function(request){
                $('#option_values').effect('highlight');
              },
            url: '/admin/option_types/reorder_values'})
        }
      })
      
<% end %>